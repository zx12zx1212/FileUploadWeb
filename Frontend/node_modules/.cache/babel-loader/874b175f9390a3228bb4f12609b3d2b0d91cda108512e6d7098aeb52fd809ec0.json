{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps, findDOMNode, getSlot } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash-es/debounce';\nimport throttle from 'lodash-es/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\nimport { watchEffect, defineComponent } from 'vue';\nvar lazyLoadProps = {\n  debounce: PropTypes.looseBool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default defineComponent({\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n    return {\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n    this.$nextTick(function () {\n      watchEffect(function () {\n        if (!_this.visible) {\n          _this.lazyLoadHandler(_this.$props);\n        }\n      });\n      var eventNode = _this.getEventNode();\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n    this.detachListeners();\n  },\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(findDOMNode(this));\n    },\n    getOffset: function getOffset() {\n      var _this$$props = this.$props,\n        offset = _this$$props.offset,\n        offsetVertical = _this$$props.offsetVertical,\n        offsetHorizontal = _this$$props.offsetHorizontal,\n        offsetTop = _this$$props.offsetTop,\n        offsetBottom = _this$$props.offsetBottom,\n        offsetLeft = _this$$props.offsetLeft,\n        offsetRight = _this$$props.offsetRight,\n        threshold = _this$$props.threshold;\n      var _offsetAll = threshold || offset;\n      var _offsetVertical = offsetVertical || _offsetAll;\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n      if (!this._.isMounted) {\n        return;\n      }\n      var offset = this.getOffset();\n      var node = findDOMNode(this);\n      var eventNode = this.getEventNode();\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({\n          visible: true\n        }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render() {\n    var children = getSlot(this);\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n    var _this$$props2 = this.$props,\n      height = _this$$props2.height,\n      width = _this$$props2.width,\n      ElementType = _this$$props2.elementType;\n    var visible = this.visible;\n    var className = this.$attrs.class;\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n    var elClasses = _defineProperty({\n      LazyLoad: true,\n      'is-visible': visible\n    }, className, className);\n    return _createVNode(ElementType, {\n      \"class\": elClasses,\n      \"style\": elStyles\n    }, {\n      default: function _default() {\n        return [visible ? children[0] : null];\n      }\n    });\n  }\n});","map":{"version":3,"names":["_defineProperty","createVNode","_createVNode","PropTypes","BaseMixin","addEventListener","initDefaultProps","findDOMNode","getSlot","warning","debounce","throttle","parentScroll","inViewport","watchEffect","defineComponent","lazyLoadProps","looseBool","elementType","string","height","oneOfType","number","offset","offsetBottom","offsetHorizontal","offsetLeft","offsetRight","offsetTop","offsetVertical","threshold","width","name","mixins","inheritAttrs","props","data","lazyLoadHandler","visible","mounted","_this","$nextTick","$props","eventNode","getEventNode","flush","resizeHander","window","scrollHander","beforeUnmount","cancel","detachListeners","methods","getOffset","_this$$props","_offsetAll","_offsetVertical","_offsetHorizontal","top","bottom","left","right","_this2","_","isMounted","node","setState","__emit","remove","render","children","length","_this$$props2","ElementType","className","$attrs","class","elStyles","elClasses","LazyLoad","default","_default"],"sources":["/Users/lyonxie/Desktop/test/node_modules/ant-design-vue/es/vc-lazy-load/src/LazyLoad.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps, findDOMNode, getSlot } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash-es/debounce';\nimport throttle from 'lodash-es/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\nimport { watchEffect, defineComponent } from 'vue';\nvar lazyLoadProps = {\n  debounce: PropTypes.looseBool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default defineComponent({\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n\n    return {\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      watchEffect(function () {\n        if (!_this.visible) {\n          _this.lazyLoadHandler(_this.$props);\n        }\n      });\n\n      var eventNode = _this.getEventNode();\n\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n\n    this.detachListeners();\n  },\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(findDOMNode(this));\n    },\n    getOffset: function getOffset() {\n      var _this$$props = this.$props,\n          offset = _this$$props.offset,\n          offsetVertical = _this$$props.offsetVertical,\n          offsetHorizontal = _this$$props.offsetHorizontal,\n          offsetTop = _this$$props.offsetTop,\n          offsetBottom = _this$$props.offsetBottom,\n          offsetLeft = _this$$props.offsetLeft,\n          offsetRight = _this$$props.offsetRight,\n          threshold = _this$$props.threshold;\n\n      var _offsetAll = threshold || offset;\n\n      var _offsetVertical = offsetVertical || _offsetAll;\n\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n\n      if (!this._.isMounted) {\n        return;\n      }\n\n      var offset = this.getOffset();\n      var node = findDOMNode(this);\n      var eventNode = this.getEventNode();\n\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({\n          visible: true\n        }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render() {\n    var children = getSlot(this);\n\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n\n    var _this$$props2 = this.$props,\n        height = _this$$props2.height,\n        width = _this$$props2.width,\n        ElementType = _this$$props2.elementType;\n    var visible = this.visible;\n    var className = this.$attrs.class;\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n\n    var elClasses = _defineProperty({\n      LazyLoad: true,\n      'is-visible': visible\n    }, className, className);\n\n    return _createVNode(ElementType, {\n      \"class\": elClasses,\n      \"style\": elStyles\n    }, {\n      default: function _default() {\n        return [visible ? children[0] : null];\n      }\n    });\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}