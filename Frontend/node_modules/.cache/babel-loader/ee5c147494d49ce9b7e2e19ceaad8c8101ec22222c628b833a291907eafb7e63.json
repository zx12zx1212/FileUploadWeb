{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createTextVNode as _createTextVNode, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\n\n/**\n * Since search box is in different position with different mode.\n * - Single: in the popup box\n * - multiple: in the selector\n * Move the code as a SearchInput for easy management.\n */\nimport BaseInput from '../../_util/BaseInput';\nimport { inject, ref, onMounted, computed, watch } from 'vue';\nimport PropTypes from '../../_util/vue-types';\nimport { createRef } from './util';\nvar SearchInput = {\n  name: 'SearchInput',\n  inheritAttrs: false,\n  props: {\n    open: PropTypes.looseBool,\n    searchValue: PropTypes.string,\n    prefixCls: PropTypes.string,\n    disabled: PropTypes.looseBool,\n    renderPlaceholder: PropTypes.func,\n    needAlign: PropTypes.looseBool,\n    ariaId: PropTypes.string,\n    isMultiple: PropTypes.looseBool.def(true),\n    showSearch: PropTypes.looseBool\n  },\n  emits: ['mirrorSearchValueChange'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var measureRef = ref();\n    var inputWidth = ref(0);\n    var mirrorSearchValue = ref(props.searchValue);\n    watch(computed(function () {\n      return props.searchValue;\n    }), function () {\n      mirrorSearchValue.value = props.searchValue;\n    });\n    watch(mirrorSearchValue, function () {\n      emit('mirrorSearchValueChange', mirrorSearchValue.value);\n    }, {\n      immediate: true\n    }); // We measure width and set to the input immediately\n\n    onMounted(function () {\n      if (props.isMultiple) {\n        watch(mirrorSearchValue, function () {\n          inputWidth.value = measureRef.value.scrollWidth;\n        }, {\n          flush: 'post',\n          immediate: true\n        });\n      }\n    });\n    return {\n      measureRef: measureRef,\n      inputWidth: inputWidth,\n      vcTreeSelect: inject('vcTreeSelect', {}),\n      mirrorSearchValue: mirrorSearchValue\n    };\n  },\n  created: function created() {\n    this.inputRef = createRef();\n    this.prevProps = _extends({}, this.$props);\n  },\n  mounted: function mounted() {\n    var _this = this;\n    this.$nextTick(function () {\n      var open = _this.$props.open;\n      if (open) {\n        _this.focus(true);\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n    var open = this.$props.open;\n    var prevProps = this.prevProps;\n    this.$nextTick(function () {\n      if (open && prevProps.open !== open) {\n        _this2.focus();\n      }\n      _this2.prevProps = _extends({}, _this2.$props);\n    });\n  },\n  methods: {\n    /**\n     * Need additional timeout for focus cause parent dom is not ready when didMount trigger\n     */\n    focus: function focus(isDidMount) {\n      var _this3 = this;\n      if (this.inputRef.current) {\n        if (isDidMount) {\n          setTimeout(function () {\n            _this3.inputRef.current.focus();\n          }, 0);\n        } else {\n          // set it into else, Avoid scrolling when focus\n          this.inputRef.current.focus();\n        }\n      }\n    },\n    blur: function blur() {\n      if (this.inputRef.current) {\n        this.inputRef.current.blur();\n      }\n    },\n    handleInputChange: function handleInputChange(e) {\n      var _e$target = e.target,\n        value = _e$target.value,\n        composing = _e$target.composing;\n      var _this$searchValue = this.searchValue,\n        searchValue = _this$searchValue === void 0 ? '' : _this$searchValue;\n      if (e.isComposing || composing || searchValue === value) {\n        this.mirrorSearchValue = value;\n        return;\n      }\n      this.vcTreeSelect.onSearchInputChange(e);\n    }\n  },\n  render: function render() {\n    var _this$$props = this.$props,\n      searchValue = _this$$props.searchValue,\n      prefixCls = _this$$props.prefixCls,\n      disabled = _this$$props.disabled,\n      renderPlaceholder = _this$$props.renderPlaceholder,\n      open = _this$$props.open,\n      ariaId = _this$$props.ariaId,\n      isMultiple = _this$$props.isMultiple,\n      showSearch = _this$$props.showSearch;\n    var onSearchInputKeyDown = this.vcTreeSelect.onSearchInputKeyDown,\n      handleInputChange = this.handleInputChange,\n      mirrorSearchValue = this.mirrorSearchValue,\n      inputWidth = this.inputWidth;\n    return _createVNode(_Fragment, null, [_createVNode(\"span\", {\n      \"class\": \"\".concat(prefixCls, \"-selection-search\"),\n      \"style\": isMultiple ? {\n        width: inputWidth + 'px'\n      } : {}\n    }, [_createVNode(BaseInput, {\n      \"type\": \"text\",\n      \"ref\": this.inputRef,\n      \"onChange\": handleInputChange,\n      \"onKeydown\": onSearchInputKeyDown,\n      \"value\": searchValue,\n      \"disabled\": disabled,\n      \"readonly\": !showSearch,\n      \"class\": \"\".concat(prefixCls, \"-selection-search-input\"),\n      \"aria-label\": \"filter select\",\n      \"aria-autocomplete\": \"list\",\n      \"aria-controls\": open ? ariaId : undefined,\n      \"aria-multiline\": \"false\"\n    }, null), isMultiple ? _createVNode(\"span\", {\n      \"ref\": \"measureRef\",\n      \"class\": \"\".concat(prefixCls, \"-selection-search-mirror\"),\n      \"aria-hidden\": true\n    }, [mirrorSearchValue, _createTextVNode(\"\\xA0\")]) : null]), renderPlaceholder && !mirrorSearchValue ? renderPlaceholder() : null]);\n  }\n};\nexport default SearchInput;","map":{"version":3,"names":["_extends","createTextVNode","_createTextVNode","createVNode","_createVNode","Fragment","_Fragment","BaseInput","inject","ref","onMounted","computed","watch","PropTypes","createRef","SearchInput","name","inheritAttrs","props","open","looseBool","searchValue","string","prefixCls","disabled","renderPlaceholder","func","needAlign","ariaId","isMultiple","def","showSearch","emits","setup","_ref","emit","measureRef","inputWidth","mirrorSearchValue","value","immediate","scrollWidth","flush","vcTreeSelect","created","inputRef","prevProps","$props","mounted","_this","$nextTick","focus","updated","_this2","methods","isDidMount","_this3","current","setTimeout","blur","handleInputChange","e","_e$target","target","composing","_this$searchValue","isComposing","onSearchInputChange","render","_this$$props","onSearchInputKeyDown","concat","width","undefined"],"sources":["/Users/lyonxie/Desktop/test/node_modules/ant-design-vue/es/vc-tree-select/src/SearchInput.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createTextVNode as _createTextVNode, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\n\n/**\n * Since search box is in different position with different mode.\n * - Single: in the popup box\n * - multiple: in the selector\n * Move the code as a SearchInput for easy management.\n */\nimport BaseInput from '../../_util/BaseInput';\nimport { inject, ref, onMounted, computed, watch } from 'vue';\nimport PropTypes from '../../_util/vue-types';\nimport { createRef } from './util';\nvar SearchInput = {\n  name: 'SearchInput',\n  inheritAttrs: false,\n  props: {\n    open: PropTypes.looseBool,\n    searchValue: PropTypes.string,\n    prefixCls: PropTypes.string,\n    disabled: PropTypes.looseBool,\n    renderPlaceholder: PropTypes.func,\n    needAlign: PropTypes.looseBool,\n    ariaId: PropTypes.string,\n    isMultiple: PropTypes.looseBool.def(true),\n    showSearch: PropTypes.looseBool\n  },\n  emits: ['mirrorSearchValueChange'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var measureRef = ref();\n    var inputWidth = ref(0);\n    var mirrorSearchValue = ref(props.searchValue);\n    watch(computed(function () {\n      return props.searchValue;\n    }), function () {\n      mirrorSearchValue.value = props.searchValue;\n    });\n    watch(mirrorSearchValue, function () {\n      emit('mirrorSearchValueChange', mirrorSearchValue.value);\n    }, {\n      immediate: true\n    }); // We measure width and set to the input immediately\n\n    onMounted(function () {\n      if (props.isMultiple) {\n        watch(mirrorSearchValue, function () {\n          inputWidth.value = measureRef.value.scrollWidth;\n        }, {\n          flush: 'post',\n          immediate: true\n        });\n      }\n    });\n    return {\n      measureRef: measureRef,\n      inputWidth: inputWidth,\n      vcTreeSelect: inject('vcTreeSelect', {}),\n      mirrorSearchValue: mirrorSearchValue\n    };\n  },\n  created: function created() {\n    this.inputRef = createRef();\n    this.prevProps = _extends({}, this.$props);\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var open = _this.$props.open;\n\n      if (open) {\n        _this.focus(true);\n      }\n    });\n  },\n  updated: function updated() {\n    var _this2 = this;\n\n    var open = this.$props.open;\n    var prevProps = this.prevProps;\n    this.$nextTick(function () {\n      if (open && prevProps.open !== open) {\n        _this2.focus();\n      }\n\n      _this2.prevProps = _extends({}, _this2.$props);\n    });\n  },\n  methods: {\n    /**\n     * Need additional timeout for focus cause parent dom is not ready when didMount trigger\n     */\n    focus: function focus(isDidMount) {\n      var _this3 = this;\n\n      if (this.inputRef.current) {\n        if (isDidMount) {\n          setTimeout(function () {\n            _this3.inputRef.current.focus();\n          }, 0);\n        } else {\n          // set it into else, Avoid scrolling when focus\n          this.inputRef.current.focus();\n        }\n      }\n    },\n    blur: function blur() {\n      if (this.inputRef.current) {\n        this.inputRef.current.blur();\n      }\n    },\n    handleInputChange: function handleInputChange(e) {\n      var _e$target = e.target,\n          value = _e$target.value,\n          composing = _e$target.composing;\n      var _this$searchValue = this.searchValue,\n          searchValue = _this$searchValue === void 0 ? '' : _this$searchValue;\n\n      if (e.isComposing || composing || searchValue === value) {\n        this.mirrorSearchValue = value;\n        return;\n      }\n\n      this.vcTreeSelect.onSearchInputChange(e);\n    }\n  },\n  render: function render() {\n    var _this$$props = this.$props,\n        searchValue = _this$$props.searchValue,\n        prefixCls = _this$$props.prefixCls,\n        disabled = _this$$props.disabled,\n        renderPlaceholder = _this$$props.renderPlaceholder,\n        open = _this$$props.open,\n        ariaId = _this$$props.ariaId,\n        isMultiple = _this$$props.isMultiple,\n        showSearch = _this$$props.showSearch;\n    var onSearchInputKeyDown = this.vcTreeSelect.onSearchInputKeyDown,\n        handleInputChange = this.handleInputChange,\n        mirrorSearchValue = this.mirrorSearchValue,\n        inputWidth = this.inputWidth;\n    return _createVNode(_Fragment, null, [_createVNode(\"span\", {\n      \"class\": \"\".concat(prefixCls, \"-selection-search\"),\n      \"style\": isMultiple ? {\n        width: inputWidth + 'px'\n      } : {}\n    }, [_createVNode(BaseInput, {\n      \"type\": \"text\",\n      \"ref\": this.inputRef,\n      \"onChange\": handleInputChange,\n      \"onKeydown\": onSearchInputKeyDown,\n      \"value\": searchValue,\n      \"disabled\": disabled,\n      \"readonly\": !showSearch,\n      \"class\": \"\".concat(prefixCls, \"-selection-search-input\"),\n      \"aria-label\": \"filter select\",\n      \"aria-autocomplete\": \"list\",\n      \"aria-controls\": open ? ariaId : undefined,\n      \"aria-multiline\": \"false\"\n    }, null), isMultiple ? _createVNode(\"span\", {\n      \"ref\": \"measureRef\",\n      \"class\": \"\".concat(prefixCls, \"-selection-search-mirror\"),\n      \"aria-hidden\": true\n    }, [mirrorSearchValue, _createTextVNode(\"\\xA0\")]) : null]), renderPlaceholder && !mirrorSearchValue ? renderPlaceholder() : null]);\n  }\n};\nexport default SearchInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}