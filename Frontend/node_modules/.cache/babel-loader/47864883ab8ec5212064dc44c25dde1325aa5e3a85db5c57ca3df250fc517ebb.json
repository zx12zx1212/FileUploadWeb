{"ast":null,"code":"import supportsPassive from '../../_util/supportsPassive';\nimport { watch, onMounted } from 'vue';\nvar SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  var touched = false;\n  var touchY = 0;\n  var element = null; // Smooth scroll\n\n  var interval = null;\n  var cleanUpEvents = function cleanUpEvents() {\n    if (element) {\n      element.removeEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n  var onTouchMove = function onTouchMove(e) {\n    if (touched) {\n      var currentY = Math.ceil(e.touches[0].pageY);\n      var offsetY = touchY - currentY;\n      touchY = currentY;\n      if (callback(offsetY)) {\n        e.preventDefault();\n      } // Smooth interval\n\n      clearInterval(interval);\n      interval = setInterval(function () {\n        offsetY *= SMOOTH_PTG;\n        if (!callback(offsetY, true) || Math.abs(offsetY) <= 0.1) {\n          clearInterval(interval);\n        }\n      }, 16);\n    }\n  };\n  var onTouchEnd = function onTouchEnd() {\n    touched = false;\n    cleanUpEvents();\n  };\n  var onTouchStart = function onTouchStart(e) {\n    cleanUpEvents();\n    if (e.touches.length === 1 && !touched) {\n      touched = true;\n      touchY = Math.ceil(e.touches[0].pageY);\n      element = e.target;\n      element.addEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('touchend', onTouchEnd);\n    }\n  };\n  onMounted(function () {\n    watch(inVirtual, function (val) {\n      listRef.value.removeEventListener('touchstart', onTouchStart, supportsPassive ? {\n        passive: false\n      } : false);\n      cleanUpEvents();\n      clearInterval(interval);\n      if (val) {\n        listRef.value.addEventListener('touchstart', onTouchStart, supportsPassive ? {\n          passive: false\n        } : false);\n      }\n    }, {\n      immediate: true\n    });\n  });\n}","map":{"version":3,"names":["supportsPassive","watch","onMounted","SMOOTH_PTG","useMobileTouchMove","inVirtual","listRef","callback","touched","touchY","element","interval","cleanUpEvents","removeEventListener","onTouchMove","passive","onTouchEnd","e","currentY","Math","ceil","touches","pageY","offsetY","preventDefault","clearInterval","setInterval","abs","onTouchStart","length","target","addEventListener","val","value","immediate"],"sources":["/Users/lyonxie/Desktop/test/node_modules/ant-design-vue/es/vc-virtual-list/hooks/useMobileTouchMove.js"],"sourcesContent":["import supportsPassive from '../../_util/supportsPassive';\nimport { watch, onMounted } from 'vue';\nvar SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  var touched = false;\n  var touchY = 0;\n  var element = null; // Smooth scroll\n\n  var interval = null;\n\n  var cleanUpEvents = function cleanUpEvents() {\n    if (element) {\n      element.removeEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (touched) {\n      var currentY = Math.ceil(e.touches[0].pageY);\n      var offsetY = touchY - currentY;\n      touchY = currentY;\n\n      if (callback(offsetY)) {\n        e.preventDefault();\n      } // Smooth interval\n\n\n      clearInterval(interval);\n      interval = setInterval(function () {\n        offsetY *= SMOOTH_PTG;\n\n        if (!callback(offsetY, true) || Math.abs(offsetY) <= 0.1) {\n          clearInterval(interval);\n        }\n      }, 16);\n    }\n  };\n\n  var onTouchEnd = function onTouchEnd() {\n    touched = false;\n    cleanUpEvents();\n  };\n\n  var onTouchStart = function onTouchStart(e) {\n    cleanUpEvents();\n\n    if (e.touches.length === 1 && !touched) {\n      touched = true;\n      touchY = Math.ceil(e.touches[0].pageY);\n      element = e.target;\n      element.addEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  onMounted(function () {\n    watch(inVirtual, function (val) {\n      listRef.value.removeEventListener('touchstart', onTouchStart, supportsPassive ? {\n        passive: false\n      } : false);\n      cleanUpEvents();\n      clearInterval(interval);\n\n      if (val) {\n        listRef.value.addEventListener('touchstart', onTouchStart, supportsPassive ? {\n          passive: false\n        } : false);\n      }\n    }, {\n      immediate: true\n    });\n  });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}