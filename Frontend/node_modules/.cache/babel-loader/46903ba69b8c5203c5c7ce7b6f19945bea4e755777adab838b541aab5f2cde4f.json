{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { computed } from 'vue';\nimport { reactive, watch, nextTick, unref } from 'vue';\nimport cloneDeep from 'lodash-es/cloneDeep';\nimport intersection from 'lodash-es/intersection';\nimport isEqual from 'lodash-es/isEqual';\nimport debounce from 'lodash-es/debounce';\nimport omit from 'lodash-es/omit';\nimport { validateRules } from './utils/validateUtil';\nimport { defaultValidateMessages } from './utils/messages';\nimport { allPromiseFinish } from './utils/asyncUtil';\nfunction isRequired(rules) {\n  var isRequired = false;\n  if (rules && rules.length) {\n    rules.every(function (rule) {\n      if (rule.required) {\n        isRequired = true;\n        return false;\n      }\n      return true;\n    });\n  }\n  return isRequired;\n}\nfunction toArray(value) {\n  if (value === undefined || value === null) {\n    return [];\n  }\n  return Array.isArray(value) ? value : [value];\n}\nfunction getPropByPath(obj, path, strict) {\n  var tempObj = obj;\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1');\n  path = path.replace(/^\\./, '');\n  var keyArr = path.split('.');\n  var i = 0;\n  for (var len = keyArr.length; i < len - 1; ++i) {\n    if (!tempObj && !strict) break;\n    var key = keyArr[i];\n    if (key in tempObj) {\n      tempObj = tempObj[key];\n    } else {\n      if (strict) {\n        throw new Error('please transfer a valid name path to validate!');\n      }\n      break;\n    }\n  }\n  return {\n    o: tempObj,\n    k: keyArr[i],\n    v: tempObj ? tempObj[keyArr[i]] : null,\n    isValid: tempObj && keyArr[i] in tempObj\n  };\n}\nfunction useForm(modelRef, rulesRef, options) {\n  var initialModel = cloneDeep(unref(modelRef));\n  var validateInfos = reactive({});\n  var rulesKeys = computed(function () {\n    return rulesRef ? Object.keys(unref(rulesRef)) : [];\n  });\n  watch(rulesKeys, function () {\n    var newValidateInfos = {};\n    rulesKeys.value.forEach(function (key) {\n      newValidateInfos[key] = validateInfos[key] || {\n        autoLink: false,\n        required: isRequired(unref(rulesRef)[key])\n      };\n      delete validateInfos[key];\n    });\n    for (var key in validateInfos) {\n      if (Object.prototype.hasOwnProperty.call(validateInfos, key)) {\n        delete validateInfos[key];\n      }\n    }\n    _extends(validateInfos, newValidateInfos);\n  }, {\n    immediate: true\n  });\n  var resetFields = function resetFields(newValues) {\n    _extends(unref(modelRef), _extends(_extends({}, cloneDeep(initialModel)), newValues));\n    nextTick(function () {\n      Object.keys(validateInfos).forEach(function (key) {\n        validateInfos[key] = {\n          autoLink: false,\n          required: isRequired(unref(rulesRef)[key])\n        };\n      });\n    });\n  };\n  var filterRules = function filterRules() {\n    var rules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var trigger = arguments.length > 1 ? arguments[1] : undefined;\n    if (!trigger.length) {\n      return rules;\n    } else {\n      return rules.filter(function (rule) {\n        var triggerList = toArray(rule.trigger || 'change');\n        return intersection(triggerList, trigger).length;\n      });\n    }\n  };\n  var lastValidatePromise = null;\n  var validateFields = function validateFields(names) {\n    var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var strict = arguments.length > 2 ? arguments[2] : undefined;\n    // Collect result in promise list\n    var promiseList = [];\n    var values = {};\n    var _loop = function _loop(i) {\n      var name = names[i];\n      var prop = getPropByPath(unref(modelRef), name, strict);\n      if (!prop.isValid) return \"continue\";\n      values[name] = prop.v;\n      var rules = filterRules(unref(rulesRef)[name], toArray(option && option.trigger));\n      if (rules.length) {\n        promiseList.push(validateField(name, prop.v, rules, option || {}).then(function () {\n          return {\n            name: name,\n            errors: [],\n            warnings: []\n          };\n        }).catch(function (ruleErrors) {\n          var mergedErrors = [];\n          var mergedWarnings = [];\n          ruleErrors.forEach(function (_ref) {\n            var warningOnly = _ref.rule.warningOnly,\n              errors = _ref.errors;\n            if (warningOnly) {\n              mergedWarnings.push.apply(mergedWarnings, _toConsumableArray(errors));\n            } else {\n              mergedErrors.push.apply(mergedErrors, _toConsumableArray(errors));\n            }\n          });\n          if (mergedErrors.length) {\n            return Promise.reject({\n              name: name,\n              errors: mergedErrors,\n              warnings: mergedWarnings\n            });\n          }\n          return {\n            name: name,\n            errors: mergedErrors,\n            warnings: mergedWarnings\n          };\n        }));\n      }\n    };\n    for (var i = 0; i < names.length; i++) {\n      var _ret = _loop(i);\n      if (_ret === \"continue\") continue;\n    }\n    var summaryPromise = allPromiseFinish(promiseList);\n    lastValidatePromise = summaryPromise;\n    var returnPromise = summaryPromise.then(function () {\n      if (lastValidatePromise === summaryPromise) {\n        return Promise.resolve(values);\n      }\n      return Promise.reject([]);\n    }).catch(function (results) {\n      var errorList = results.filter(function (result) {\n        return result && result.errors.length;\n      });\n      return Promise.reject({\n        values: values,\n        errorFields: errorList,\n        outOfDate: lastValidatePromise !== summaryPromise\n      });\n    }); // Do not throw in console\n\n    returnPromise.catch(function (e) {\n      return e;\n    });\n    return returnPromise;\n  };\n  var validateField = function validateField(name, value, rules) {\n    var option = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var promise = validateRules([name], value, rules, _extends({\n      validateMessages: defaultValidateMessages\n    }, option), !!option.validateFirst);\n    if (!validateInfos[name]) {\n      return promise.catch(function (e) {\n        return e;\n      });\n    }\n    validateInfos[name].validateStatus = 'validating';\n    promise.catch(function (e) {\n      return e;\n    }).then(function () {\n      var results = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      if (validateInfos[name].validateStatus === 'validating') {\n        var res = results.filter(function (result) {\n          return result && result.errors.length;\n        });\n        validateInfos[name].validateStatus = res.length ? 'error' : 'success';\n        validateInfos[name].help = res.length ? res.map(function (r) {\n          return r.errors;\n        }) : '';\n      }\n    });\n    return promise;\n  };\n  var validate = function validate(names, option) {\n    var keys = [];\n    var strict = true;\n    if (!names) {\n      strict = false;\n      keys = rulesKeys.value;\n    } else if (Array.isArray(names)) {\n      keys = names;\n    } else {\n      keys = [names];\n    }\n    var promises = validateFields(keys, option || {}, strict); // Do not throw in console\n\n    promises.catch(function (e) {\n      return e;\n    });\n    return promises;\n  };\n  var clearValidate = function clearValidate(names) {\n    var keys = [];\n    if (!names) {\n      keys = rulesKeys.value;\n    } else if (Array.isArray(names)) {\n      keys = names;\n    } else {\n      keys = [names];\n    }\n    keys.forEach(function (key) {\n      validateInfos[key] && _extends(validateInfos[key], {\n        validateStatus: '',\n        help: ''\n      });\n    });\n  };\n  var mergeValidateInfo = function mergeValidateInfo(items) {\n    var info = {\n      autoLink: false\n    };\n    var help = [];\n    var infos = Array.isArray(items) ? items : [items];\n    for (var i = 0; i < infos.length; i++) {\n      var arg = infos[i];\n      if ((arg === null || arg === void 0 ? void 0 : arg.validateStatus) === 'error') {\n        info.validateStatus = 'error';\n        arg.help && help.push(arg.help);\n      }\n      info.required = info.required || (arg === null || arg === void 0 ? void 0 : arg.required);\n    }\n    info.help = help;\n    return info;\n  };\n  var oldModel = initialModel;\n  var isFirstTime = true;\n  var modelFn = function modelFn(model) {\n    var names = [];\n    rulesKeys.value.forEach(function (key) {\n      var prop = getPropByPath(model, key, false);\n      var oldProp = getPropByPath(oldModel, key, false);\n      var isFirstValidation = isFirstTime && (options === null || options === void 0 ? void 0 : options.immediate) && prop.isValid;\n      if (isFirstValidation || !isEqual(prop.v, oldProp.v)) {\n        names.push(key);\n      }\n    });\n    validate(names, {\n      trigger: 'change'\n    });\n    isFirstTime = false;\n    oldModel = cloneDeep(model);\n  };\n  var debounceOptions = options === null || options === void 0 ? void 0 : options.debounce;\n  watch(modelRef, debounceOptions && debounceOptions.wait ? debounce(modelFn, debounceOptions.wait, omit(debounceOptions, ['wait'])) : modelFn, {\n    immediate: options && !!options.immediate,\n    deep: true\n  });\n  watch(rulesRef, function () {\n    if (options && options.validateOnRuleChange) {\n      validate();\n    }\n  }, {\n    deep: true\n  });\n  return {\n    modelRef: modelRef,\n    rulesRef: rulesRef,\n    initialModel: initialModel,\n    validateInfos: validateInfos,\n    resetFields: resetFields,\n    validate: validate,\n    validateField: validateField,\n    mergeValidateInfo: mergeValidateInfo,\n    clearValidate: clearValidate\n  };\n}\nexport default useForm;","map":{"version":3,"names":["_toConsumableArray","_extends","computed","reactive","watch","nextTick","unref","cloneDeep","intersection","isEqual","debounce","omit","validateRules","defaultValidateMessages","allPromiseFinish","isRequired","rules","length","every","rule","required","toArray","value","undefined","Array","isArray","getPropByPath","obj","path","strict","tempObj","replace","keyArr","split","i","len","key","Error","o","k","v","isValid","useForm","modelRef","rulesRef","options","initialModel","validateInfos","rulesKeys","Object","keys","newValidateInfos","forEach","autoLink","prototype","hasOwnProperty","call","immediate","resetFields","newValues","filterRules","arguments","trigger","filter","triggerList","lastValidatePromise","validateFields","names","option","promiseList","values","_loop","name","prop","push","validateField","then","errors","warnings","catch","ruleErrors","mergedErrors","mergedWarnings","_ref","warningOnly","apply","Promise","reject","_ret","summaryPromise","returnPromise","resolve","results","errorList","result","errorFields","outOfDate","e","promise","validateMessages","validateFirst","validateStatus","res","help","map","r","validate","promises","clearValidate","mergeValidateInfo","items","info","infos","arg","oldModel","isFirstTime","modelFn","model","oldProp","isFirstValidation","debounceOptions","wait","deep","validateOnRuleChange"],"sources":["/Users/lyonxie/Desktop/test/node_modules/ant-design-vue/es/form/useForm.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { computed } from 'vue';\nimport { reactive, watch, nextTick, unref } from 'vue';\nimport cloneDeep from 'lodash-es/cloneDeep';\nimport intersection from 'lodash-es/intersection';\nimport isEqual from 'lodash-es/isEqual';\nimport debounce from 'lodash-es/debounce';\nimport omit from 'lodash-es/omit';\nimport { validateRules } from './utils/validateUtil';\nimport { defaultValidateMessages } from './utils/messages';\nimport { allPromiseFinish } from './utils/asyncUtil';\n\nfunction isRequired(rules) {\n  var isRequired = false;\n\n  if (rules && rules.length) {\n    rules.every(function (rule) {\n      if (rule.required) {\n        isRequired = true;\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  return isRequired;\n}\n\nfunction toArray(value) {\n  if (value === undefined || value === null) {\n    return [];\n  }\n\n  return Array.isArray(value) ? value : [value];\n}\n\nfunction getPropByPath(obj, path, strict) {\n  var tempObj = obj;\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1');\n  path = path.replace(/^\\./, '');\n  var keyArr = path.split('.');\n  var i = 0;\n\n  for (var len = keyArr.length; i < len - 1; ++i) {\n    if (!tempObj && !strict) break;\n    var key = keyArr[i];\n\n    if (key in tempObj) {\n      tempObj = tempObj[key];\n    } else {\n      if (strict) {\n        throw new Error('please transfer a valid name path to validate!');\n      }\n\n      break;\n    }\n  }\n\n  return {\n    o: tempObj,\n    k: keyArr[i],\n    v: tempObj ? tempObj[keyArr[i]] : null,\n    isValid: tempObj && keyArr[i] in tempObj\n  };\n}\n\nfunction useForm(modelRef, rulesRef, options) {\n  var initialModel = cloneDeep(unref(modelRef));\n  var validateInfos = reactive({});\n  var rulesKeys = computed(function () {\n    return rulesRef ? Object.keys(unref(rulesRef)) : [];\n  });\n  watch(rulesKeys, function () {\n    var newValidateInfos = {};\n    rulesKeys.value.forEach(function (key) {\n      newValidateInfos[key] = validateInfos[key] || {\n        autoLink: false,\n        required: isRequired(unref(rulesRef)[key])\n      };\n      delete validateInfos[key];\n    });\n\n    for (var key in validateInfos) {\n      if (Object.prototype.hasOwnProperty.call(validateInfos, key)) {\n        delete validateInfos[key];\n      }\n    }\n\n    _extends(validateInfos, newValidateInfos);\n  }, {\n    immediate: true\n  });\n\n  var resetFields = function resetFields(newValues) {\n    _extends(unref(modelRef), _extends(_extends({}, cloneDeep(initialModel)), newValues));\n\n    nextTick(function () {\n      Object.keys(validateInfos).forEach(function (key) {\n        validateInfos[key] = {\n          autoLink: false,\n          required: isRequired(unref(rulesRef)[key])\n        };\n      });\n    });\n  };\n\n  var filterRules = function filterRules() {\n    var rules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var trigger = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (!trigger.length) {\n      return rules;\n    } else {\n      return rules.filter(function (rule) {\n        var triggerList = toArray(rule.trigger || 'change');\n        return intersection(triggerList, trigger).length;\n      });\n    }\n  };\n\n  var lastValidatePromise = null;\n\n  var validateFields = function validateFields(names) {\n    var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var strict = arguments.length > 2 ? arguments[2] : undefined;\n    // Collect result in promise list\n    var promiseList = [];\n    var values = {};\n\n    var _loop = function _loop(i) {\n      var name = names[i];\n      var prop = getPropByPath(unref(modelRef), name, strict);\n      if (!prop.isValid) return \"continue\";\n      values[name] = prop.v;\n      var rules = filterRules(unref(rulesRef)[name], toArray(option && option.trigger));\n\n      if (rules.length) {\n        promiseList.push(validateField(name, prop.v, rules, option || {}).then(function () {\n          return {\n            name: name,\n            errors: [],\n            warnings: []\n          };\n        }).catch(function (ruleErrors) {\n          var mergedErrors = [];\n          var mergedWarnings = [];\n          ruleErrors.forEach(function (_ref) {\n            var warningOnly = _ref.rule.warningOnly,\n                errors = _ref.errors;\n\n            if (warningOnly) {\n              mergedWarnings.push.apply(mergedWarnings, _toConsumableArray(errors));\n            } else {\n              mergedErrors.push.apply(mergedErrors, _toConsumableArray(errors));\n            }\n          });\n\n          if (mergedErrors.length) {\n            return Promise.reject({\n              name: name,\n              errors: mergedErrors,\n              warnings: mergedWarnings\n            });\n          }\n\n          return {\n            name: name,\n            errors: mergedErrors,\n            warnings: mergedWarnings\n          };\n        }));\n      }\n    };\n\n    for (var i = 0; i < names.length; i++) {\n      var _ret = _loop(i);\n\n      if (_ret === \"continue\") continue;\n    }\n\n    var summaryPromise = allPromiseFinish(promiseList);\n    lastValidatePromise = summaryPromise;\n    var returnPromise = summaryPromise.then(function () {\n      if (lastValidatePromise === summaryPromise) {\n        return Promise.resolve(values);\n      }\n\n      return Promise.reject([]);\n    }).catch(function (results) {\n      var errorList = results.filter(function (result) {\n        return result && result.errors.length;\n      });\n      return Promise.reject({\n        values: values,\n        errorFields: errorList,\n        outOfDate: lastValidatePromise !== summaryPromise\n      });\n    }); // Do not throw in console\n\n    returnPromise.catch(function (e) {\n      return e;\n    });\n    return returnPromise;\n  };\n\n  var validateField = function validateField(name, value, rules) {\n    var option = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var promise = validateRules([name], value, rules, _extends({\n      validateMessages: defaultValidateMessages\n    }, option), !!option.validateFirst);\n\n    if (!validateInfos[name]) {\n      return promise.catch(function (e) {\n        return e;\n      });\n    }\n\n    validateInfos[name].validateStatus = 'validating';\n    promise.catch(function (e) {\n      return e;\n    }).then(function () {\n      var results = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (validateInfos[name].validateStatus === 'validating') {\n        var res = results.filter(function (result) {\n          return result && result.errors.length;\n        });\n        validateInfos[name].validateStatus = res.length ? 'error' : 'success';\n        validateInfos[name].help = res.length ? res.map(function (r) {\n          return r.errors;\n        }) : '';\n      }\n    });\n    return promise;\n  };\n\n  var validate = function validate(names, option) {\n    var keys = [];\n    var strict = true;\n\n    if (!names) {\n      strict = false;\n      keys = rulesKeys.value;\n    } else if (Array.isArray(names)) {\n      keys = names;\n    } else {\n      keys = [names];\n    }\n\n    var promises = validateFields(keys, option || {}, strict); // Do not throw in console\n\n    promises.catch(function (e) {\n      return e;\n    });\n    return promises;\n  };\n\n  var clearValidate = function clearValidate(names) {\n    var keys = [];\n\n    if (!names) {\n      keys = rulesKeys.value;\n    } else if (Array.isArray(names)) {\n      keys = names;\n    } else {\n      keys = [names];\n    }\n\n    keys.forEach(function (key) {\n      validateInfos[key] && _extends(validateInfos[key], {\n        validateStatus: '',\n        help: ''\n      });\n    });\n  };\n\n  var mergeValidateInfo = function mergeValidateInfo(items) {\n    var info = {\n      autoLink: false\n    };\n    var help = [];\n    var infos = Array.isArray(items) ? items : [items];\n\n    for (var i = 0; i < infos.length; i++) {\n      var arg = infos[i];\n\n      if ((arg === null || arg === void 0 ? void 0 : arg.validateStatus) === 'error') {\n        info.validateStatus = 'error';\n        arg.help && help.push(arg.help);\n      }\n\n      info.required = info.required || (arg === null || arg === void 0 ? void 0 : arg.required);\n    }\n\n    info.help = help;\n    return info;\n  };\n\n  var oldModel = initialModel;\n  var isFirstTime = true;\n\n  var modelFn = function modelFn(model) {\n    var names = [];\n    rulesKeys.value.forEach(function (key) {\n      var prop = getPropByPath(model, key, false);\n      var oldProp = getPropByPath(oldModel, key, false);\n      var isFirstValidation = isFirstTime && (options === null || options === void 0 ? void 0 : options.immediate) && prop.isValid;\n\n      if (isFirstValidation || !isEqual(prop.v, oldProp.v)) {\n        names.push(key);\n      }\n    });\n    validate(names, {\n      trigger: 'change'\n    });\n    isFirstTime = false;\n    oldModel = cloneDeep(model);\n  };\n\n  var debounceOptions = options === null || options === void 0 ? void 0 : options.debounce;\n  watch(modelRef, debounceOptions && debounceOptions.wait ? debounce(modelFn, debounceOptions.wait, omit(debounceOptions, ['wait'])) : modelFn, {\n    immediate: options && !!options.immediate,\n    deep: true\n  });\n  watch(rulesRef, function () {\n    if (options && options.validateOnRuleChange) {\n      validate();\n    }\n  }, {\n    deep: true\n  });\n  return {\n    modelRef: modelRef,\n    rulesRef: rulesRef,\n    initialModel: initialModel,\n    validateInfos: validateInfos,\n    resetFields: resetFields,\n    validate: validate,\n    validateField: validateField,\n    mergeValidateInfo: mergeValidateInfo,\n    clearValidate: clearValidate\n  };\n}\n\nexport default useForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}