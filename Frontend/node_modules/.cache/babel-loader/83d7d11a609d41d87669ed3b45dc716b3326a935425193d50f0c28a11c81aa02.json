{"ast":null,"code":"import _createForOfIteratorHelper from \"@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nfunction loopFiles(item, callback) {\n  var dirReader = item.createReader();\n  var fileList = [];\n  function sequence() {\n    dirReader.readEntries(function (entries) {\n      var entryList = Array.prototype.slice.apply(entries);\n      fileList = fileList.concat(entryList); // Check if all the file has been viewed\n\n      var isFinished = !entryList.length;\n      if (isFinished) {\n        callback(fileList);\n      } else {\n        sequence();\n      }\n    });\n  }\n  sequence();\n}\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    path = path || '';\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            });\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n          callback([file]);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item, function (entries) {\n        entries.forEach(function (entryItem) {\n          _traverseFileTree(entryItem, \"\".concat(path).concat(item.name, \"/\"));\n        });\n      });\n    }\n  };\n  var _iterator = _createForOfIteratorHelper(files),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var file = _step.value;\n      _traverseFileTree(file.webkitGetAsEntry());\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n};\nexport default traverseFileTree;","map":{"version":3,"names":["_createForOfIteratorHelper","loopFiles","item","callback","dirReader","createReader","fileList","sequence","readEntries","entries","entryList","Array","prototype","slice","apply","concat","isFinished","length","traverseFileTree","files","isAccepted","_traverseFileTree","path","isFile","file","fullPath","webkitRelativePath","Object","defineProperties","writable","replace","isDirectory","forEach","entryItem","name","_iterator","_step","s","n","done","value","webkitGetAsEntry","err","e","f"],"sources":["/Users/lyonxie/Desktop/test/node_modules/ant-design-vue/es/vc-upload/src/traverseFileTree.js"],"sourcesContent":["import _createForOfIteratorHelper from \"@babel/runtime/helpers/esm/createForOfIteratorHelper\";\n\nfunction loopFiles(item, callback) {\n  var dirReader = item.createReader();\n  var fileList = [];\n\n  function sequence() {\n    dirReader.readEntries(function (entries) {\n      var entryList = Array.prototype.slice.apply(entries);\n      fileList = fileList.concat(entryList); // Check if all the file has been viewed\n\n      var isFinished = !entryList.length;\n\n      if (isFinished) {\n        callback(fileList);\n      } else {\n        sequence();\n      }\n    });\n  }\n\n  sequence();\n}\n\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    path = path || '';\n\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            });\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n\n          callback([file]);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item, function (entries) {\n        entries.forEach(function (entryItem) {\n          _traverseFileTree(entryItem, \"\".concat(path).concat(item.name, \"/\"));\n        });\n      });\n    }\n  };\n\n  var _iterator = _createForOfIteratorHelper(files),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var file = _step.value;\n\n      _traverseFileTree(file.webkitGetAsEntry());\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n};\n\nexport default traverseFileTree;"],"mappings":"AAAA,OAAOA,0BAA0B,MAAM,sDAAsD;AAE7F,SAASC,SAASA,CAACC,IAAI,EAAEC,QAAQ,EAAE;EACjC,IAAIC,SAAS,GAAGF,IAAI,CAACG,YAAY,CAAC,CAAC;EACnC,IAAIC,QAAQ,GAAG,EAAE;EAEjB,SAASC,QAAQA,CAAA,EAAG;IAClBH,SAAS,CAACI,WAAW,CAAC,UAAUC,OAAO,EAAE;MACvC,IAAIC,SAAS,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,KAAK,CAACL,OAAO,CAAC;MACpDH,QAAQ,GAAGA,QAAQ,CAACS,MAAM,CAACL,SAAS,CAAC,CAAC,CAAC;;MAEvC,IAAIM,UAAU,GAAG,CAACN,SAAS,CAACO,MAAM;MAElC,IAAID,UAAU,EAAE;QACdb,QAAQ,CAACG,QAAQ,CAAC;MACpB,CAAC,MAAM;QACLC,QAAQ,CAAC,CAAC;MACZ;IACF,CAAC,CAAC;EACJ;EAEAA,QAAQ,CAAC,CAAC;AACZ;AAEA,IAAIW,gBAAgB,GAAG,SAASA,gBAAgBA,CAACC,KAAK,EAAEhB,QAAQ,EAAEiB,UAAU,EAAE;EAC5E,IAAIC,iBAAiB,GAAG,SAASA,iBAAiBA,CAACnB,IAAI,EAAEoB,IAAI,EAAE;IAC7DA,IAAI,GAAGA,IAAI,IAAI,EAAE;IAEjB,IAAIpB,IAAI,CAACqB,MAAM,EAAE;MACfrB,IAAI,CAACsB,IAAI,CAAC,UAAUA,IAAI,EAAE;QACxB,IAAIJ,UAAU,CAACI,IAAI,CAAC,EAAE;UACpB;UACA,IAAItB,IAAI,CAACuB,QAAQ,IAAI,CAACD,IAAI,CAACE,kBAAkB,EAAE;YAC7CC,MAAM,CAACC,gBAAgB,CAACJ,IAAI,EAAE;cAC5BE,kBAAkB,EAAE;gBAClBG,QAAQ,EAAE;cACZ;YACF,CAAC,CAAC;YACFL,IAAI,CAACE,kBAAkB,GAAGxB,IAAI,CAACuB,QAAQ,CAACK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;YAC1DH,MAAM,CAACC,gBAAgB,CAACJ,IAAI,EAAE;cAC5BE,kBAAkB,EAAE;gBAClBG,QAAQ,EAAE;cACZ;YACF,CAAC,CAAC;UACJ;UAEA1B,QAAQ,CAAC,CAACqB,IAAI,CAAC,CAAC;QAClB;MACF,CAAC,CAAC;IACJ,CAAC,MAAM,IAAItB,IAAI,CAAC6B,WAAW,EAAE;MAC3B9B,SAAS,CAACC,IAAI,EAAE,UAAUO,OAAO,EAAE;QACjCA,OAAO,CAACuB,OAAO,CAAC,UAAUC,SAAS,EAAE;UACnCZ,iBAAiB,CAACY,SAAS,EAAE,EAAE,CAAClB,MAAM,CAACO,IAAI,CAAC,CAACP,MAAM,CAACb,IAAI,CAACgC,IAAI,EAAE,GAAG,CAAC,CAAC;QACtE,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;EACF,CAAC;EAED,IAAIC,SAAS,GAAGnC,0BAA0B,CAACmB,KAAK,CAAC;IAC7CiB,KAAK;EAET,IAAI;IACF,KAAKD,SAAS,CAACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAACD,KAAK,GAAGD,SAAS,CAACG,CAAC,CAAC,CAAC,EAAEC,IAAI,GAAG;MAClD,IAAIf,IAAI,GAAGY,KAAK,CAACI,KAAK;MAEtBnB,iBAAiB,CAACG,IAAI,CAACiB,gBAAgB,CAAC,CAAC,CAAC;IAC5C;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZP,SAAS,CAACQ,CAAC,CAACD,GAAG,CAAC;EAClB,CAAC,SAAS;IACRP,SAAS,CAACS,CAAC,CAAC,CAAC;EACf;AACF,CAAC;AAED,eAAe1B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}