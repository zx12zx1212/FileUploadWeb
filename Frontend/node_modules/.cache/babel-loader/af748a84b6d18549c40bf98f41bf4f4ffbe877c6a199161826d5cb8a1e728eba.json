{"ast":null,"code":"import { reactive } from 'vue';\nexport default function useHeights(getKey, onItemAdd, onItemRemove) {\n  var instance = new Map();\n  var heights = reactive({});\n  var heightUpdateId = 0;\n  function collectHeight() {\n    heightUpdateId += 1;\n    var currentId = heightUpdateId;\n    Promise.resolve().then(function () {\n      // Only collect when it's latest call\n      if (currentId !== heightUpdateId) return; // let changed = false;\n\n      instance.forEach(function (element, key) {\n        if (element && element.offsetParent) {\n          var offsetHeight = element.offsetHeight;\n          if (heights[key] !== offsetHeight) {\n            //changed = true;\n            heights[key] = element.offsetHeight;\n          }\n        }\n      });\n    });\n  }\n  function setInstance(item, ins) {\n    var key = getKey(item);\n    var origin = instance.get(key);\n    if (ins) {\n      instance.set(key, ins);\n      collectHeight();\n    } else {\n      instance.delete(key);\n    } // Instance changed\n\n    if (!origin !== !ins) {\n      if (ins) {\n        onItemAdd === null || onItemAdd === void 0 ? void 0 : onItemAdd(item);\n      } else {\n        onItemRemove === null || onItemRemove === void 0 ? void 0 : onItemRemove(item);\n      }\n    }\n  }\n  return [setInstance, collectHeight, heights];\n}","map":{"version":3,"names":["reactive","useHeights","getKey","onItemAdd","onItemRemove","instance","Map","heights","heightUpdateId","collectHeight","currentId","Promise","resolve","then","forEach","element","key","offsetParent","offsetHeight","setInstance","item","ins","origin","get","set","delete"],"sources":["/Users/lyonxie/Desktop/Frontend/node_modules/ant-design-vue/es/vc-virtual-list/hooks/useHeights.js"],"sourcesContent":["import { reactive } from 'vue';\nexport default function useHeights(getKey, onItemAdd, onItemRemove) {\n  var instance = new Map();\n  var heights = reactive({});\n  var heightUpdateId = 0;\n\n  function collectHeight() {\n    heightUpdateId += 1;\n    var currentId = heightUpdateId;\n    Promise.resolve().then(function () {\n      // Only collect when it's latest call\n      if (currentId !== heightUpdateId) return; // let changed = false;\n\n      instance.forEach(function (element, key) {\n        if (element && element.offsetParent) {\n          var offsetHeight = element.offsetHeight;\n\n          if (heights[key] !== offsetHeight) {\n            //changed = true;\n            heights[key] = element.offsetHeight;\n          }\n        }\n      });\n    });\n  }\n\n  function setInstance(item, ins) {\n    var key = getKey(item);\n    var origin = instance.get(key);\n\n    if (ins) {\n      instance.set(key, ins);\n      collectHeight();\n    } else {\n      instance.delete(key);\n    } // Instance changed\n\n\n    if (!origin !== !ins) {\n      if (ins) {\n        onItemAdd === null || onItemAdd === void 0 ? void 0 : onItemAdd(item);\n      } else {\n        onItemRemove === null || onItemRemove === void 0 ? void 0 : onItemRemove(item);\n      }\n    }\n  }\n\n  return [setInstance, collectHeight, heights];\n}"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,KAAK;AAC9B,eAAe,SAASC,UAAUA,CAACC,MAAM,EAAEC,SAAS,EAAEC,YAAY,EAAE;EAClE,IAAIC,QAAQ,GAAG,IAAIC,GAAG,CAAC,CAAC;EACxB,IAAIC,OAAO,GAAGP,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1B,IAAIQ,cAAc,GAAG,CAAC;EAEtB,SAASC,aAAaA,CAAA,EAAG;IACvBD,cAAc,IAAI,CAAC;IACnB,IAAIE,SAAS,GAAGF,cAAc;IAC9BG,OAAO,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CAAC,YAAY;MACjC;MACA,IAAIH,SAAS,KAAKF,cAAc,EAAE,OAAO,CAAC;;MAE1CH,QAAQ,CAACS,OAAO,CAAC,UAAUC,OAAO,EAAEC,GAAG,EAAE;QACvC,IAAID,OAAO,IAAIA,OAAO,CAACE,YAAY,EAAE;UACnC,IAAIC,YAAY,GAAGH,OAAO,CAACG,YAAY;UAEvC,IAAIX,OAAO,CAACS,GAAG,CAAC,KAAKE,YAAY,EAAE;YACjC;YACAX,OAAO,CAACS,GAAG,CAAC,GAAGD,OAAO,CAACG,YAAY;UACrC;QACF;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA,SAASC,WAAWA,CAACC,IAAI,EAAEC,GAAG,EAAE;IAC9B,IAAIL,GAAG,GAAGd,MAAM,CAACkB,IAAI,CAAC;IACtB,IAAIE,MAAM,GAAGjB,QAAQ,CAACkB,GAAG,CAACP,GAAG,CAAC;IAE9B,IAAIK,GAAG,EAAE;MACPhB,QAAQ,CAACmB,GAAG,CAACR,GAAG,EAAEK,GAAG,CAAC;MACtBZ,aAAa,CAAC,CAAC;IACjB,CAAC,MAAM;MACLJ,QAAQ,CAACoB,MAAM,CAACT,GAAG,CAAC;IACtB,CAAC,CAAC;;IAGF,IAAI,CAACM,MAAM,KAAK,CAACD,GAAG,EAAE;MACpB,IAAIA,GAAG,EAAE;QACPlB,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACiB,IAAI,CAAC;MACvE,CAAC,MAAM;QACLhB,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACgB,IAAI,CAAC;MAChF;IACF;EACF;EAEA,OAAO,CAACD,WAAW,EAAEV,aAAa,EAAEF,OAAO,CAAC;AAC9C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}